CREATE DATABASE QLHH;
USE QLHH;
CREATE TABLE KHACHHANG
(
	MAKHACHHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENCONGTY NVARCHAR(100) NOT NULL,
	TENGIAODICH NVARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	EMAIL VARCHAR(20) NOT NULL,
	DIENTHOAI VARCHAR(20) NOT NULL,
	FAX VARCHAR(20) NOT NULL
);
CREATE TABLE NHANVIEN
(
	MANHANVIEN VARCHAR(10) NOT NULL PRIMARY KEY,
	HO NVARCHAR(10) NOT NULL,
	TEN NVARCHAR(10) NOT NULL,
	NGAYSINH DATE NOT NULL,
	NGAYLAMVIEC DATE NOT NULL,
	DIACHI NVARCHAR(20) NOT NULL,
	DIENTHOAI NVARCHAR(20),
	LUONGCOBAN MONEY NOT NULL,
	PHUCAP MONEY NOT NULL
);
CREATE TABLE NHACUNGCAP
(
	MACONGTY VARCHAR(10) NOT NULL PRIMARY KEY,
	TENCONGTY NVARCHAR(100) NOT NULL,
	TENGIAODICH NVARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	DIENTHOAI VARCHAR(20) NOT NULL,
	FAX VARCHAR(20) NOT NULL,
	EMAIL VARCHAR(20) NOT NULL
);
CREATE TABLE LOAIHANG
(
	MALOAIHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENLOAIHANG NVARCHAR(100) NOT NULL
);
CREATE TABLE MATHANG
(
	MAHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENHANG NVARCHAR(100) NOT NULL,
	MACONGTY VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES NHACUNGCAP(MACONGTY),
	MALOAIHANG VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES LOAIHANG(MALOAIHANG),
	SOLUONG DECIMAL(10,2) NOT NULL,
	DONVITINH NVARCHAR(20) NOT NULL,
	GIAHANG MONEY NOT NULL
);
CREATE TABLE DONDATHANG
(
	SOHOADON VARCHAR(10) NOT NULL PRIMARY KEY,
	MAKHACHHANG VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
	MANHANVIEN VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES NHANVIEN(MANHANVIEN),
	NGAYDATHANG DATETIME,
	NGAYGIAOHANG DATETIME,
	NGAYCHUYENHANG DATETIME,
	NOIGIAOHANG NVARCHAR(100)
);
CREATE TABLE CTDATHANG
(
	SOHOADON VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES DONDATHANG(SOHOADON),
	MAHANG VARCHAR(10) NOT NULL FOREIGN KEY REFERENCES MATHANG(MAHANG),
	GIABAN MONEY NOT NULL,
	SOLUONG DECIMAL(10,2) NOT NULL,
	MUCGIAMGIA DECIMAL(10,2) NOT NULL
);
INSERT INTO KHACHHANG VALUES
	('KH01','APPLE','EK1',N'02 ĐẠI HỌC NHA TRANG','A@ntu.edu.vn','0773582646','7721'),
	('KH02','OPPO','EK2',N'02 ĐẠI HỌC NHA TRANG','B@ntu.edu.vn','0773582645','7722'),
	('KH03','SAMSUNG','EK3',N'02 ĐẠI HỌC NHA TRANG','C@ntu.edu.vn','0773582643','7723');
INSERT INTO NHANVIEN VALUES
	('NV01',N'TRẦN',N'A','2005-02-1','2025-01-1',N'SỐ 02 NGUYỄN TRÃI','0132154812',50000000,100000),
	('NV02',N'TRẦN',N'B','2005-02-2','2025-01-2',N'SỐ 03 NGUYỄN TRÃI','0121654646',60000000,200000),
	('NV03',N'TRẦN',N'C','2005-02-3','2025-01-3',N'SỐ 04 NGUYỄN TRÃI','0321212153',70000000,300000);
INSERT INTO NHACUNGCAP VALUES
	('NCC01','APPLE','EK1','91 NGUYEN TRAI, NHA TRANG, KHANH HOA','0986453121','7721','D@gmail.com'),
	('NCC02','OPPO','EK3','12/7 VINH HAI, NHA TRANG, KHANH HOA','0982453121','7722','E@gmail.com'),
	('NCC03','SAMSUNG','EK4','37 LE THANH TON, NHA TRANG, KHANH HOA','0186453121','7723','Z@gmail.com');
INSERT INTO LOAIHANG VALUES
	('LH01','DIEN THOAI'),
	('LH02','LAPTOP'),
	('LH03','IPAD');
INSERT INTO MATHANG VALUES
	('MH01',N'DIENTHOAI','NCC01','LH01',100,N'nghìn',12000),
	('MH02',N'LAPTOP','NCC02','LH02',100,N'nghìn',12000),
	('MH03',N'IPAD','NCC03','LH03',100,N'nghìn',12000);
INSERT INTO DONDATHANG VALUES
	('DDH01','KH01','NV01','2023-07-06 09:40:30','2023-07-09 12:40:50','2023-07-09 01:20:30',N'07 2/4, NHA TRANG, KHANH HOA'),
	('DDH02','KH02','NV02','2022-11-30 08:50:40','2022-12-01 09:11:23','2022-12-01 01:20:30',N'33 NGO GIA TU, NHA TRANG, KHANH HOA'),
	('DDH03','KH03','NV03','2023-12-30 07:40:40','2024-01-01 09:13:55','2024-01-01 01:20:36',N'02 NGUYEN THIEN THUAT, NHA TRANG, KHANH HOA');
INSERT INTO CTDATHANG VALUES
	('DDH01','MH01',12000,1,0),
	('DDH02','MH02',17000,1,0),
	('DDH03','MH03',23000,2,0.3);

--1.1 TẠO CSDL QLDA
CREATE DATABASE QLSV;
USE QLSV;
--1.2 Tạo 6 bảng
CREATE TABLE KHOA
(
	MaKhoa VARCHAR(10) NOT NULL PRIMARY KEY,
	TenKhoa NVARCHAR(50) NOT NULL,
	SL_CBGD SMALLINT NOT NULL
);
CREATE TABLE GIAOVIEN
(
	MaGV VARCHAR(5) NOT NULL PRIMARY KEY,
	TenGV NVARCHAR(50) NOT NULL,
	MaKhoa VARCHAR(10) FOREIGN KEY REFERENCES KHOA(MaKhoa)
);
CREATE TABLE MONHOC
(
	MaMH VARCHAR(5) NOT NULL PRIMARY KEY,
	TenMH NVARCHAR(50) NOT NULL,
	SoTC smallint NOT NULL
);
CREATE TABLE SINHVIEN
(
	MSSV VARCHAR(5) NOT NULL PRIMARY KEY,
	Ten NVARCHAR(50) NOT NULL,
	GioiTinh VARCHAR(5) NOT NULL,
	DiaChi NVARCHAR(50) NOT NULL,
	DienThoai VARCHAR(20),
	MaKhoa VARCHAR(10) FOREIGN KEY REFERENCES KHOA(MaKhoa)
);
CREATE TABLE GIANGDAY
(
	MaKhoaHoc VARCHAR(5) NOT NULL PRIMARY KEY,
	MaGV VARCHAR(5) FOREIGN KEY REFERENCES GIAOVIEN(MaGV),
	MaMH VARCHAR(5) FOREIGN KEY REFERENCES MONHOC(MaMH),
	HocKy SMALLINT NOT NULL,
	Nam INT NOT NULL,
);
CREATE TABLE KETQUA
(
	MaSV VARCHAR(5) FOREIGN KEY REFERENCES SINHVIEN(MSSV),
	MaKhoaHoc VARCHAR(5) FOREIGN KEY REFERENCES GIANGDAY(MaKhoaHoc),
	Diem DECIMAL(3,1) NOT NULL,
	CONSTRAINT pk_ketqua PRIMARY KEY (MaSV, MaKhoaHoc)
);
INSERT INTO KHOA VALUES
	('CNTT', N'Công nghệ thông tin', 15),
	('TOAN', N'Toán', 20),
	('SINH', N'Sinh học', 7);
INSERT INTO SINHVIEN VALUES
	('SV001', 'BUI THUY AN', N'Nữ', '223 TRAN HUNG DAO .HCM', '0843132202', 'CNTT'),
	('SV002', 'NGUYEN THANH TUNG', N'Nam', '140 CONG QUYNH .HCM', '0581525678', 'CNTT'),
	('SV003', 'NGUYEN THANH LONG', N'Nam', '112/4 CONG QUYNH .HCM', '0918345623', 'TOAN'),
	('SV004', 'HOANG THI HOA', N'Nữ', '90 NG VAN CU .HCM', '0988320123', 'CNTT'),
	('SV005', 'TRAN HONG SON', N'Nam', '54 CAO THANG .HANOI', '0928345987', 'CNTT');
INSERT INTO MONHOC
VALUES
	('CSDL', 'CO SO DU LIEU', 3),
	('CTDL', 'CAU TRUC DU LIEU', 4),
	('KTLT', 'KY THUAT LAP TRINH', 5),
	('CWIN', 'LAP TRINH C TREN WINDOWS', 4);
INSERT INTO GIAOVIEN VALUES
	('GV01', 'PHAM THI THAO', 'CNTT'),
	('GV02', 'LAM HOANG VU', 'TOAN'),
	('GV03', 'TRAN HOANG TIEN', 'CNTT'),
	('GV04', 'HOANG VUONG', 'CNTT');
INSERT INTO GIANGDAY VALUES
	('K1', 'GV01', 'CSDL', 1, 2021),
	('K2', 'GV04', 'KTLT', 2, 2020),
	('K3', 'GV03', 'CTDL', 1, 2020),
	('K4', 'GV04', 'CWIN', 1, 2020),
	('K5', 'GV01', 'CSDL', 1, 2021);
INSERT INTO KETQUA VALUES
	('SV001', 'K1', 8.5),
	('SV002', 'K3', 7.0),
	('SV003', 'K4', 7.5),
	('SV001', 'K2', 9.0),
	('SV004', 'K3', 6.0),
	('SV005', 'K3', 7.0),
	('SV002', 'K1', 7.0),
	('SV003', 'K2', 8.5),
	('SV005', 'K5', 7.0),
	('SV004', 'K4', 2.0);